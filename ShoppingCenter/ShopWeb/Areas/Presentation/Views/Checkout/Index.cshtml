@using ShopCore.Enum
@using ShopCore.Helper
@using ShopData.Model
@section styles
{
    <style type="text/css">
        .font-red {
            color: red;
        }
    </style>
}

@{
    var shoppingCart = SessionHelper.GetSession<Cart>(SessionName.ShoppingCart) ?? new Cart();
}

<div class="paddings">
    <div class="container">
        <!--BreadCrumbs-->
        <div class="row">
            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li class="breadcrumb-title">Thanh Toán</li>
                </ol>
            </div>
        </div>
        <!--BreadCrumbs-->

        <div class="margin-top-section">
            <div class="row">

                <div class="col-lg-6">
                    <legend><h3>Thông tin giao hàng</h3></legend>
                    <form class="row form-checkout" method="post">
                        <div class="form-group col-lg-12">
                            <label for="@GlobalVariable.txtFullName">Họ & Tên <span class="font-red">*</span></label>
                            <input type="text" class="form-control"
                                   name="@GlobalVariable.txtFullName" id="@GlobalVariable.txtFullName" required=""/>
                        </div>
                        <div class="form-group col-lg-12">
                            <label for="@GlobalVariable.txtAddress">Địa chỉ <span class="font-red">*</span></label>
                            <input type="text" class="form-control"
                                   name="@GlobalVariable.txtAddress" id="@GlobalVariable.txtAddress" required=""/>
                        </div>
                        <div class="form-group col-lg-12">
                            <label for="@GlobalVariable.txtCity">Thành phố <span class="font-red">*</span></label>
                            <input type="text" class="form-control"
                                   name="@GlobalVariable.txtCity" id="@GlobalVariable.txtCity" required=""/>
                        </div>
                        <!--Email Address-->
                        <div class="form-group col-lg-6">
                            <label for="@GlobalVariable.txtEmail">Email <span class="font-red">*</span></label>
                            <input type="email" class="form-control"
                                   name="@GlobalVariable.txtEmail" id="@GlobalVariable.txtEmail" required="">
                        </div>
                        <!--Email Address-->
                        <!--Email Address-->
                        <div class="form-group col-lg-6">
                            <label for="@GlobalVariable.txtSDT">Số điện thoại <span class="font-red">*</span></label>
                            <input type="number" class="form-control"
                                   name="@GlobalVariable.txtSDT" id="@GlobalVariable.txtSDT" required=""/>
                        </div>
                        <!--Email Address-->

                        <div class="col-lg-12 checkbox-shipping">
                            <label>
                                Quý khách vui lòng cung cấp chính xác địa chỉ giao hàng để được giao hàng tận nơi
                            </label>
                        </div>

                        <!--Message-->
                        <div class="form-group col-lg-12 top-mini">
                            <label for="@GlobalVariable.txtNote">Ghi chú</label>
                            <textarea class="form-control"
                                      name="@GlobalVariable.txtNote" id="@GlobalVariable.txtNote"
                                      placeholder="Quý khách có ghi chú về địa chỉ giao hàng hoặc thông tin khác, xin hãy điền vào đây."></textarea>
                        </div>
                        <!--Message-->
                        <div class="form-group col-lg-12 right">
                            <button type="submit" value="Submit" class="boton-dark bottom-mini top text-uppercase">Xác nhận</button>
                        </div>
                    </form>
                </div>
                <div class="col-lg-6">
                    <div class="bg-gray order-resume">
                        <div class="text-uppercase">
                            <h3>Hóa đơn</h3>
                            <p class="top">
                                <b>Sản phẩm<span class="float-right">Giá</span></b>
                            </p>
                            <hr />
                            @foreach (var item in shoppingCart.CartDetails)
                            {
                                <p class="item-detail">
                                    @item.Product.ProductName
                                    <span class="amount">x @item.Quantity</span>
                                    <span class="float-right">@Utilities.FormatAmountToVnd(item.Product.Price)</span>
                                </p>
                            }
                            <hr />
                            <p>Tổng Giá <span class="float-right">@Utilities.FormatAmountToVnd(shoppingCart.TotalPrice)</span></p>
                            <p>Phí vận chuyển<span class="float-right">Miễn Phí</span></p>
                            <hr />
                            <p class="total">Tổng cộng<span class="float-right">@Utilities.FormatAmountToVnd(shoppingCart.TotalPrice)</span></p>
                            <hr>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script type="text/javascript">
        $(function() {
            var msgFillOut = "Vui lòng nhập đủ thông tin";
            var msgEmail = "Vui lòng nhập đúng địa chỉ email";

            function invalidMsg(textbox) {
                if (textbox.value.trim() == '') {
                    textbox.setCustomValidity(msgFillOut);
                }
                else if (textbox.validity.typeMismatch) {
                    textbox.setCustomValidity(msgEmail);
                }
                else {
                    textbox.setCustomValidity('');
                }
                return true;
            }

            var control = $(".form-control");
            control.on("invalid input", function () {
                invalidMsg(this);
            });

        });
    </script>
}
